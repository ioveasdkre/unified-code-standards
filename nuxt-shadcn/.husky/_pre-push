#!/bin/sh
# This loads nvm.sh and sets the correct PATH before running hook

# ğŸ” è‡ªå‹•åµæ¸¬åŸ·è¡Œç’°å¢ƒ
if command -v bun &>/dev/null; then
  RUNNER="bun x"
elif command -v pnpm &>/dev/null; then
  RUNNER="pnpm dir"
else
  RUNNER="npx"
fi

echo "ğŸ” Running build checks using [$RUNNER]..."

# 1ï¸âƒ£ åŸ·è¡Œæ¸¬è©¦
# if [ -f "package.json" ]; then
#   echo "ğŸ§ª Running tests..."
#   $RUNNER test
#   if [ $? -ne 0 ]; then
#     echo "âŒ Tests failed in $project. Push aborted."
#     exit 1
#   fi
# else
#   echo "âš ï¸ No package.json found in $project, skipping tests..."
# fi

# 2ï¸âƒ£ åŸ·è¡Œå»ºç½®
# echo "ğŸ— Running build..."
# $RUNNER generate
# if [ $? -ne 0 ]; then
#   echo "âŒ Build failed in $project. Push aborted."
#   exit 1
# fi

echo "âœ… All checks passed. Proceeding with push."
